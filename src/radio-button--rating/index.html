<!doctype html>
<html lang="en" class="no-js">
	<head>
		<meta charset="utf-8">
		<title>
			Styled Radio Button Star Rating Component
		</title>
		<meta name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<script>
			// remove no-js and add 'js' to the HTML
			document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
		</script>
		<link rel="stylesheet" href="../assets/css/--demo-only--.css">
		<link rel="stylesheet" href="../assets/css/--shared--.css">
		<link rel="stylesheet" href="../assets/css/radio--rating.css">
	</head>

	<body>

		<!--
			Single SVG Reference
		-->
		<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">
			<symbol id="star"><g transform="scale(0.03125 0.03125)"><path d="M896 384l-313.5-40.781-134.5-279.219-134.531 279.219-313.469 40.781 230.469 208.875-59.469 303.063 277-148.812 277.062 148.812-59.562-303.063 230.5-208.875z" /></g></symbol>
			<symbol viewBox="0 0 18 18" id="no_rating"><g transform="scale(0.017578125 0.017578125)"><path d="M512 56.889c-251.362 0-455.111 203.749-455.111 455.111s203.749 455.111 455.111 455.111 455.111-203.749 455.111-455.111-203.749-455.111-455.111-455.111zM170.667 512c0-73.639 23.666-141.694 63.472-197.527l475.388 475.388c-55.833 39.806-123.888 63.472-197.527 63.472-188.222 0-341.333-153.111-341.333-341.333zM789.861 709.527l-475.388-475.388c55.833-39.806 123.888-63.472 197.527-63.472 188.222 0 341.333 153.111 341.333 341.333 0 73.639-23.666 141.694-63.472 197.527z" /></g></symbol>
		</svg>

		<div class="demo-wrap">

			<header class="demo-wrap__header">
				<h1>Styled Radio Button Star Rating Component</h1>
				<p>
					Pattern to restyle a radio button group into a star rating component.
				</p>
				<nav>
					<a href="https://github.com/scottaohara/a11y_styled_form_controls">See source on GitHub</a>,
					<a href="/a11y_styled_form_controls">Index of form controls</a>
				</nav>
			</header>

			<main>

				<article class="demo">
					<h2>
						Pattern Demo
					</h2>

					<form action="#" method="post">
						<fieldset class="r-radios">
							<legend>
								Rate my rating system:
							</legend>

							<input checked aria-label="No rating" type="radio" name="r_input" id="r_input_0">
							<label aria-hidden="true" for="r_input_0" class="r-radio r-radio--none">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#no_rating"/>
								</svg>
								<span>No rating</span>
							</label>

							<input aria-label="1 star" type="radio" name="r_input" id="r_input_1">
							<label for="r_input_1" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use aria-hidden="true" xlink:href="#star"/>
								</svg>
								<span>1 Star</span>
							</label>

							<input aria-label="2 stars" type="radio" name="r_input" id="r_input_2">
							<label for="r_input_2" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>2 Stars</span>
							</label>

							<input aria-label="3 stars" type="radio" name="r_input" id="r_input_3">
							<label for="r_input_3" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>3 Stars</span>
							</label>

							<input aria-label="4 stars" type="radio" name="r_input" id="r_input_4">
							<label for="r_input_4" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>4 Stars</span>
							</label>

							<input aria-label="5 stars" type="radio" name="r_input" id="r_input_5">
							<label for="r_input_5" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>5 Stars</span>
							</label>
						</fieldset>

						<fieldset class="r-radios" disabled>
							<legend>
								Disabled (via fieldset) my rating system:
							</legend>

							<input checked aria-label="No rating" type="radio" name="r_dinput" id="r_input_d0">
							<label aria-hidden="true" for="r_input_d0" class="r-radio r-radio--none">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#no_rating"/>
								</svg>
								<span>No rating</span>
							</label>

							<input aria-label="1 star" type="radio" name="r_dinput" id="r_input_d1">
							<label for="r_input_d1" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use aria-hidden="true" xlink:href="#star"/>
								</svg>
								<span>1 Star</span>
							</label>

							<input aria-label="2 stars" type="radio" name="r_dinput" id="r_input_d2">
							<label for="r_input_d2" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>2 Stars</span>
							</label>

							<input aria-label="3 stars" type="radio" name="r_dinput" id="r_input_d3">
							<label for="r_input_d3" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>3 Stars</span>
							</label>

							<input aria-label="4 stars" type="radio" name="r_dinput" id="r_input_d4">
							<label for="r_input_d4" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>4 Stars</span>
							</label>

							<input aria-label="5 stars" type="radio" name="r_dinput" id="r_input_d5">
							<label for="r_input_d5" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>5 Stars</span>
							</label>
						</fieldset>

						<fieldset class="r-radios">
							<legend>
								Rate my rating system (some inputs disabled):
							</legend>

							<input checked aria-label="No rating" type="radio" name="r_input_dd" id="r_input_dd_0">
							<label aria-hidden="true" for="r_input_dd_0" class="r-radio r-radio--none">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#no_rating"/>
								</svg>
								<span>No rating</span>
							</label>

							<input aria-label="1 star" type="radio" name="r_input_dd" id="r_input_dd_1">
							<label for="r_input_dd_1" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use aria-hidden="true" xlink:href="#star"/>
								</svg>
								<span>1 Star</span>
							</label>

							<input disabled aria-label="2 stars" type="radio" name="r_input_dd" id="r_input_dd_2">
							<label for="r_input_dd_2" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>2 Stars</span>
							</label>

							<input aria-label="3 stars" type="radio" name="r_input_dd" id="r_input_dd_3">
							<label for="r_input_dd_3" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>3 Stars</span>
							</label>

							<input aria-label="4 stars" type="radio" name="r_input_dd" id="r_input_dd_4">
							<label for="r_input_dd_4" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>4 Stars</span>
							</label>

							<input disabled aria-label="5 stars" type="radio" name="r_input_dd" id="r_input_dd_5">
							<label for="r_input_dd_5" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>5 Stars</span>
							</label>
						</fieldset>
					</form>


					<section class="demo-details">
						<h3>
							Pattern Details
						</h3>

						<details open>
							<summary>Pattern Markup</summary>
								<pre><code>&lt;fieldset class="r-radios">
  &lt;legend>
    Rate my rating system:
  &lt;/legend>

  &lt;input type="radio" name="r_input" id="r_input_0"
    checked aria-label="No rating">
  &lt;label aria-hidden="true" for="r_input_0"
    class="r-radio r-radio--none">
    &lt;svg aria-hidden="true" focsable="false">
      &lt;use xlink:href="#no_rating"/>
    &lt;/svg>
    &lt;span>No rating&lt;/span>
  &lt;/label>

  &lt;input type="radio" name="r_input" id="r_input_1"
    aria-label="1 star">
  &lt;label for="r_input_1" class="r-radio">
    &lt;svg aria-hidden="true" focsable="false">
      &lt;use aria-hidden="true" xlink:href="#star"/>
    &lt;/svg>
    &lt;span>1 Star&lt;/span>
  &lt;/label>

  &lt;!-- add more stars here! -->
&lt;/fieldset></code></pre>
						</details>

						<p>
							When customizing any form control, it must remain accessible to assistive technology and keyboard users. To keep this custom style accessible, a series of visually hidden radio button form controls are included in the pattern. They allow keyboard and screen reader users to discover the control and submit ratings.
						</p>

						<p>
							The radio buttons are wrapped in a <code>fieldset</code> element. The presence of the <code>fieldset</code> element groups the radio buttons and programmatically communicates that they are functionally interdependent. The <code>legend</code> element provides a description of the grouped radio buttons' purpose.
						</p>

						<p>
							If it makes sense for the grouping of radio buttons to be called out in the document outline, then the legend can incorporate a heading element.
						</p>

<pre>ED: I think a code example of a legend with a heading could be useful here, or language about when it's appropriate to elevate this sort of thing into the document outline.</pre>

						<p>
							Radio buttons do not have a way to revert to a completely unchecked state without using a form reset button or performing a hard refresh of the  browser.
						</p>

						<p>
							The rating pattern loads with no rating set, as none of the radio buttons are checked by default. If a user accidentally accidentally triggers a rating, a "No rating" radio button is present, allowing them to reset the rating without having to lose progress. If rating system calls for a default rating when the page loads, the <code>checked</code> attribute can be applied to the relevant radio button input.
						</p>

						<p>
							The stars indicating the rating are generated by an inline <abbr>SVG</abbr> included with the <code>label</code> for each radio button. These <abbr>SVG</abbr> stars can be manipulated by <abbr>CSS</abbr> to control their visual appearance. A text string also included in the <code>label</code> and will become visible on <code>:hover</code> and <code>:focus</code> of the <abbr>SVG</abbr> and radio button input, allowing the user to determine what metrics the rating system uses.
						</p>

						<p>
							The placement of the <code>label</code> element and <code>aria-label</code> attribute on the radio button inputs was done to mitigate some screen readers from announcing a rating multiple times when navigating through the content with the virtual cursor (<kbd>up</kbd> and <kbd>down</kbd> arrow keys).
						</p>

						<p>
							The <code>aria-label</code> declared on the radio button inputs ensures that the accessible name of the input will be announced to screen readers.
						</p>

						<p>
							The text string within the label is still needed for the <code>:hover</code> and <code>:focus</code> states. It also provides users with a quick reference for the star they've currently navigated to, without having to go back and manually count out the preceding number of stars. This is especially helpful for systems that use a large number of rating values.
						</p>

						<p>
							Additionally, if <abbr>CSS</abbr> were to ever be disabled, the <code>label</code> text would become visible, providing necessary context to the radio buttons' functionality.
						</p>

						<p>
							Note that the <abbr>SVG</abbr> elements have the following attributes applied to them:
						</p>

						<ul>
							<li><code>aria-hidden="true"</code> to hide the <abbr>SVG</abbr> from screen readers.</li>
							<li><code>focusable="false"</code> to ensure that Internet Explorer does not allow keyboard focus to attempt to traverse the <abbr>SVG</abbr>.</li>
						</ul>

						<h4>Affects on Screen Reader Announcements?</h4>
						<p>
							...
						</p>

					</section> <!-- /.demo-details -->
				</article> <!-- /.demo -->
			</main>
		</div> <!-- /.demo-wrap -->

	</body>
</html>

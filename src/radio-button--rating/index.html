<!doctype html>
<html lang="en" class="no-js">
	<head>
		<meta charset="utf-8">
		<title>
			Styled Native Radio Rating Component
		</title>
		<meta name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<script>
			// remove no-js and add 'js' to the HTML
			document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
		</script>
		<link rel="stylesheet" href="../assets/css/--demo-only--.css">
		<link rel="stylesheet" href="../assets/css/--shared--.css">
		<link rel="stylesheet" href="../assets/css/radio--rating.css">
	</head>

	<body>

		<!--
			Single SVG Reference
		-->
		<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">
			<symbol id="star"><g transform="scale(0.03125 0.03125)"><path d="M896 384l-313.5-40.781-134.5-279.219-134.531 279.219-313.469 40.781 230.469 208.875-59.469 303.063 277-148.812 277.062 148.812-59.562-303.063 230.5-208.875z" /></g></symbol>
			<symbol viewBox="0 0 18 18" id="no_rating"><g transform="scale(0.017578125 0.017578125)"><path d="M512 56.889c-251.362 0-455.111 203.749-455.111 455.111s203.749 455.111 455.111 455.111 455.111-203.749 455.111-455.111-203.749-455.111-455.111-455.111zM170.667 512c0-73.639 23.666-141.694 63.472-197.527l475.388 475.388c-55.833 39.806-123.888 63.472-197.527 63.472-188.222 0-341.333-153.111-341.333-341.333zM789.861 709.527l-475.388-475.388c55.833-39.806 123.888-63.472 197.527-63.472 188.222 0 341.333 153.111 341.333 341.333 0 73.639-23.666 141.694-63.472 197.527z" /></g></symbol>
		</svg>

		<div class="demo-wrap">

			<header class="demo-wrap__header">
				<h1>Styled Native Radio Rating Component</h1>
				<p>
					Pattern to restyle a radio button group into a rating component.
				</p>
				<nav>
					<a href="https://github.com/scottaohara/a11y_styled_form_controls">See source on GitHub</a>,
					<a href="/a11y_styled_form_controls">Index of input patterns</a>
				</nav>
			</header>

			<main>

				<article class="demo">
					<h2>
						Demo
					</h2>

					<form action="#" method="post">
						<fieldset class="r-radios">
							<legend>
								Rate my rating system:
							</legend>

							<input checked aria-label="No rating" type="radio" name="r_input" id="r_input_0">
							<label aria-hidden="true" for="r_input_0" class="r-radio r-radio--none">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#no_rating"/>
								</svg>
								<span>No rating</span>
							</label>

							<input aria-label="1 star" type="radio" name="r_input" id="r_input_1">
							<label for="r_input_1" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use aria-hidden="true" xlink:href="#star"/>
								</svg>
								<span>1 Star</span>
							</label>

							<input aria-label="2 stars" type="radio" name="r_input" id="r_input_2">
							<label for="r_input_2" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>2 Stars</span>
							</label>

							<input aria-label="3 stars" type="radio" name="r_input" id="r_input_3">
							<label for="r_input_3" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>3 Stars</span>
							</label>

							<input aria-label="4 stars" type="radio" name="r_input" id="r_input_4">
							<label for="r_input_4" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>4 Stars</span>
							</label>

							<input aria-label="5 stars" type="radio" name="r_input" id="r_input_5">
							<label for="r_input_5" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>5 Stars</span>
							</label>
						</fieldset>

						<fieldset class="r-radios" disabled>
							<legend>
								Disabled (via fieldset) my rating system:
							</legend>

							<input checked aria-label="No rating" type="radio" name="r_dinput" id="r_input_d0">
							<label aria-hidden="true" for="r_input_d0" class="r-radio r-radio--none">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#no_rating"/>
								</svg>
								<span>No rating</span>
							</label>

							<input aria-label="1 star" type="radio" name="r_dinput" id="r_input_d1">
							<label for="r_input_d1" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use aria-hidden="true" xlink:href="#star"/>
								</svg>
								<span>1 Star</span>
							</label>

							<input aria-label="2 stars" type="radio" name="r_dinput" id="r_input_d2">
							<label for="r_input_d2" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>2 Stars</span>
							</label>

							<input aria-label="3 stars" type="radio" name="r_dinput" id="r_input_d3">
							<label for="r_input_d3" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>3 Stars</span>
							</label>

							<input aria-label="4 stars" type="radio" name="r_dinput" id="r_input_d4">
							<label for="r_input_d4" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>4 Stars</span>
							</label>

							<input aria-label="5 stars" type="radio" name="r_dinput" id="r_input_d5">
							<label for="r_input_d5" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>5 Stars</span>
							</label>
						</fieldset>

						<fieldset class="r-radios">
							<legend>
								Rate my rating system (some inputs disabled):
							</legend>

							<input checked aria-label="No rating" type="radio" name="r_input_dd" id="r_input_dd_0">
							<label aria-hidden="true" for="r_input_dd_0" class="r-radio r-radio--none">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#no_rating"/>
								</svg>
								<span>No rating</span>
							</label>

							<input aria-label="1 star" type="radio" name="r_input_dd" id="r_input_dd_1">
							<label for="r_input_dd_1" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use aria-hidden="true" xlink:href="#star"/>
								</svg>
								<span>1 Star</span>
							</label>

							<input disabled aria-label="2 stars" type="radio" name="r_input_dd" id="r_input_dd_2">
							<label for="r_input_dd_2" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>2 Stars</span>
							</label>

							<input aria-label="3 stars" type="radio" name="r_input_dd" id="r_input_dd_3">
							<label for="r_input_dd_3" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>3 Stars</span>
							</label>

							<input aria-label="4 stars" type="radio" name="r_input_dd" id="r_input_dd_4">
							<label for="r_input_dd_4" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>4 Stars</span>
							</label>

							<input disabled aria-label="5 stars" type="radio" name="r_input_dd" id="r_input_dd_5">
							<label for="r_input_dd_5" class="r-radio">
								<svg aria-hidden="true" focsable="false">
									<use xlink:href="#star"/>
								</svg>
								<span>5 Stars</span>
							</label>
						</fieldset>
					</form>


					<section class="demo-details">
						<h3>
							Demo Details
						</h3>

						<p>
							To create a custom styled rating component, without the need for JavaScript, the following markup pattern should be followed:
						</p>

						<pre><code>&lt;fieldset class="r-radios">
  &lt;legend>
    Rate my rating system:
  &lt;/legend>

  &lt;input type="radio" name="r_input" id="r_input_0"
    checked aria-label="No rating">
  &lt;label aria-hidden="true" for="r_input_0"
    class="r-radio r-radio--none">
    &lt;svg aria-hidden="true" focsable="false">
      &lt;use xlink:href="#no_rating"/>
    &lt;/svg>
    &lt;span>No rating&lt;/span>
  &lt;/label>

  &lt;input type="radio" name="r_input" id="r_input_1"
    aria-label="1 star">
  &lt;label for="r_input_1" class="r-radio">
    &lt;svg aria-hidden="true" focsable="false">
      &lt;use aria-hidden="true" xlink:href="#star"/>
    &lt;/svg>
    &lt;span>1 Star&lt;/span>
  &lt;/label>

  &lt;!-- add more stars here! --></code></pre>

						<p>
							As the rating system is built by a series of radio buttons, these form controls should live within a <code>fieldset</code> with a <code>legend</code> to appropriately caption the radio button group's purpose. If it makes sense for these groupings of radio buttons to be called out in the document outline, then the <code>legend</code> can have an appropriately ranked heading element as its child element, containing the text of the <code>legend</code>.
						</p>

						<p>
							The ratings begin with a "No rating" radio button that has is set to the <code>checked</code> attribute, by default. Radio buttons do not have a native way to revert to a completely unchecked state, without usage of a form reset button or a user performing a hard refresh with their browser.  If a user erroneously "rates" an item, there should be a way for them to negate that rating without having to reset a form or refresh the page, hence the "No rating" option.
						</p>

						<p>
							The actual radio button <code>input</code> elements are visually hidden, but maintain the ability to be focused and found by keyboard and screen reader users.  The <code>label</code> for each radio button contains an inline SVG of a star, so the SVG can be manipulated by CSS. A text string is also contained within the label and is visible on <code>:hover</code> and <code>:focus</code> of the SVG and <code>input</code>, respectively.
						</p>

						<p>
							What may seem odd, and it is, is the usage of a <code>label</code>, as well as <code>aria-label</code>s on the checkbox <code>input</code>s themselves.  This was done to mitigate some screen readers from announcing a rating multiple times when navigating through the content with the virtual cursor (<kbd>up</kbd> and <kbd>down</kbd> arrow keys).  The <code>aria-label</code> on the radio button ensures that the accessible name of the <code>input</code> will be announced to screen readers.  The text string within the <code>label</code> is still needed for the <code>:hover</code> and <code>:focus</code> states, to provide users with a quick reference for the star they're on, without having to actually count them out (especially for instances of many stars). Additionally, if CSS were to ever fail or be purposefully turned off, these labels would then become visible, providing necessary context to the radio buttons in their less than ideal visual layout.
						</p>

						<p>
							Note that the <code>svg</code> elements have the following attributes:
						</p>

						<ul>
							<li><code>aria-hidden="true"</code> to hide the SVG from screen readers.</li>
							<li><code>focusable="false"</code> to ensure that Internet Explorer does not allow keyboard focus to attempt to traverse the SVG.</li>
						</ul>

					</section> <!-- /.demo-details -->

				</article> <!-- /.demo -->

			</main>

		</div> <!-- /.demo-wrap -->

	</body>
</html>
